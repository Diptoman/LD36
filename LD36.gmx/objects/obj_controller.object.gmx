<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100</depth>
  <persistent>0</persistent>
  <parentName>obj_end</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.alarmTiming = 5; //Higher number = Less play speed

mode = "Placement"; //Placement or Play
currentSelection = ""; //In Placement mode, what is currently selected
currentSelectionID = -1;

portalList = ds_list_create();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Selection mode placement
if ((mode == "Placement"))
{
    blankArea = collision_point(floor((mouse_x+16)/32)*32, floor((mouse_y+16)/32)*32,obj_blankArea,0,0);
    if ((mouse_x &lt; 928) //Mouse to the left
    &amp;&amp; (blankArea)) //Mouse is over blank space
    {
        if (blankArea.isFilled)
        {
            //If portal
            if (blankArea.tileType == "portal")
            {
                ds_list_delete(portalList,ds_list_find_index(portalList,blankArea.tileID));
            }
            
            blankArea.tileType = "";
            blankArea.isFilled = false;
            (blankArea.selectionID).num += 1;
            blankArea.selectionID = -1;
        
            with (blankArea.tileID) instance_destroy();
            blankArea.tileID = -1;
        }
        
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Selection mode placement
if ((mode == "Placement") &amp;&amp; (currentSelection != ""))
{
    if ((mouse_x &lt; 928) //Mouse to the left
    &amp;&amp; (currentSelectionID.num &gt; 0) //Spare tiles available
    &amp;&amp; (collision_point(floor((mouse_x+16)/32)*32, floor((mouse_y+16)/32)*32,obj_blankArea,0,0))) //Mouse is over blank space
    {
        toCreateObject = -1;
        switch(currentSelection)
        {
            case "path":
                toCreateObject = obj_path;
                break;
            case "ldPath":
                toCreateObject = obj_ldPath;
                break;
            case "rdPath":
                toCreateObject = obj_rdPath;
                break;
            case "ruPath":
                toCreateObject = obj_ruPath;
                break;
            case "luPath":
                toCreateObject = obj_luPath;
                break;
            case "rdSplitter":
                toCreateObject = obj_rdSplitter;
                break;
            case "ldSplitter":
                toCreateObject = obj_ldSplitter;
                break;
            case "ruSplitter":
                toCreateObject = obj_ruSplitter;
                break;
            case "luSplitter":
                toCreateObject = obj_luSplitter;
                break;
            case "rlSplitter":
                toCreateObject = obj_rlSplitter;
                break;
            case "udSplitter":
                toCreateObject = obj_udSplitter;
                break;
            case "colorShifter":
                toCreateObject = obj_colorShifter;
                break;
            case "portal":
                toCreateObject = obj_portal;
                break;
        }
        
        if (toCreateObject!=-1)
        {
            blankArea = collision_point(floor((mouse_x+16)/32)*32, floor((mouse_y+16)/32)*32,obj_blankArea,0,0);
            if (!blankArea.isFilled)
            {
                tile = instance_create(floor((mouse_x+16)/32)*32, floor((mouse_y+16)/32)*32,toCreateObject);
                blankArea.tileID = tile;
                blankArea.tileType = currentSelection;
                
                //Add info about current selection ID
                blankArea.selectionID = currentSelectionID;
                
                //Decrease number
                currentSelectionID.num -= 1;
                
                //Portal type
                if (currentSelection == "portal")
                {
                    tile.type = portalSub + 1;
                    ds_list_add(portalList,tile);
                    
                    //Find destination, add set them
                    for(i=0;i&lt;ds_list_size(portalList);i++)
                    {
                        if (ds_list_find_value(portalList,i).type == (portalSub + 1))
                        {
                            (ds_list_find_value(portalList,i)).destinationID = tile.id;
                            tile.destinationID =  (ds_list_find_value(portalList,i)).id;
                        }
                    }
                }
                
                blankArea.isFilled = 1;
            }
            
            //Change the area
        }
        
        //show_message("LOL");
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Selection Mode Draw
if (mode == "Placement")
{
    toDrawSprite = -1;
    toDrawSubImage = 0;
    if (mouse_x &lt; 928)
    {
        switch(currentSelection)
        {
            case "path":
                toDrawSprite = spr_path;
                break;
            case "ldPath":
                toDrawSprite = spr_ldPath;
                break;
            case "rdPath":
                toDrawSprite = spr_rdPath;
                break;
            case "ruPath":
                toDrawSprite = spr_ruPath;
                break;
            case "luPath":
                toDrawSprite = spr_luPath;
                break;
            case "rdSplitter":
                toDrawSprite = spr_rdSplitter;
                break;
            case "ldSplitter":
                toDrawSprite = spr_ldSplitter;
                break;
            case "ruSplitter":
                toDrawSprite = spr_ruSplitter;
                break;
            case "luSplitter":
                toDrawSprite = spr_luSplitter;
                break;
            case "rlSplitter":
                toDrawSprite = spr_rlSplitter;
                break;
            case "udSplitter":
                toDrawSprite = spr_udSplitter;
                break;
            case "colorShifter":
                toDrawSprite = spr_colorShifter;
                break;
            case "portal":
                toDrawSprite = spr_portalUI; 
                toDrawSubImage = portalSub;
                break;
        }
        
        if (toDrawSprite!=-1)
        {
            draw_sprite(toDrawSprite,toDrawSubImage,floor((mouse_x+16)/32)*32, floor((mouse_y+16)/32)*32);
        }
        
        //show_message("LOL");
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
